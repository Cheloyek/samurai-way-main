"use strict";(self.webpackChunksamurai_way=self.webpackChunksamurai_way||[]).push([[58],{2058:function(e,s,a){a.r(s),a.d(s,{Chat:function(){return v},default:function(){return C}});var n=a(885),t=a(2791),r=a(6061),i=a(364),d=a(5021),c=function(e){return e.chat.status},u=a(2312),l=a(8041),m=a(4602),h={message:"Chat_message__fu8nE",imageAndText:"Chat_imageAndText__xRypC",text:"Chat_text__IAAfG",name:"Chat_name__pNIyv",messageText:"Chat_messageText__czpAQ",time:"Chat_time__My98W",friendMessage:"Chat_friendMessage__9rIc8",friendImageAndText:"Chat_friendImageAndText__z5JCx",friendText:"Chat_friendText__rEvOO",friendName:"Chat_friendName__uIAKa",friendMessageText:"Chat_friendMessageText__En-33"},o=a(5999),x=function(e){return e.auth.userId},f=a(2988),g=a(184),v=function(){var e=(0,i.v9)(c),s=(0,i.I0)();return(0,t.useEffect)((function(){return s((0,d.WE)()),function(){s((0,d.R7)())}}),[r.ws]),(0,g.jsxs)("div",{style:{width:"100%",height:"100%",backgroundColor:"#fffdfd"},children:["error"===e&&(0,g.jsx)("div",{children:"Error"}),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(_,{}),(0,g.jsx)(p,{})]})]})},_=function(){var e=(0,i.v9)((function(e){return e.chat.messages})),s=(0,t.useRef)(null),a=(0,t.useState)(!1),r=(0,n.Z)(a,2),d=r[0],c=r[1];(0,t.useEffect)((function(){d&&setTimeout((function(){var e;null===(e=s.current)||void 0===e||e.scrollIntoView({block:"end",behavior:"smooth"})}),500)}),[e]);return(0,g.jsxs)("div",{style:{maxHeight:"80vh",overflowY:"auto",backgroundImage:"url(".concat(f,")"),marginLeft:"auto",marginRight:"auto",maxWidth:"1200px"},onScroll:function(e){var s=e.currentTarget;Math.abs(s.scrollHeight-s.scrollTop-s.clientHeight)<135?!d&&c(!0):d&&c(!1)},children:[e.map((function(e,s){return(0,g.jsx)(j,{message:e},e.id)})),(0,g.jsx)("div",{ref:s})]})},j=function(e){var s=e.message,a=(0,i.v9)(x);return s.userId===a?(0,g.jsx)("div",{id:(0,o.Z)()+s.userId,className:h.message,children:(0,g.jsxs)("div",{className:h.imageAndText,children:[(0,g.jsx)("img",{className:h.img,src:s.photo}),(0,g.jsxs)("div",{className:h.text,children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("div",{className:h.name,children:s.userName}),(0,g.jsx)("pre",{className:h.messageText,children:s.message})]}),(0,g.jsx)("div",{className:h.time,children:"09:00"})]})]})}):(0,g.jsx)("div",{className:h.friendMessage,children:(0,g.jsxs)("div",{className:h.friendImageAndText,children:[(0,g.jsx)("img",{src:s.photo}),(0,g.jsxs)("div",{className:h.friendText,children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("div",{className:h.friendName,children:s.userName}),(0,g.jsx)("pre",{className:h.friendMessageText,children:s.message})]}),(0,g.jsx)("div",{className:h.time,children:"09:01"})]})]})})},p=function(){var e=(0,t.useState)(""),s=(0,n.Z)(e,2),a=s[0],r=s[1],h=(0,i.I0)(),o=(0,i.v9)(c);return(0,g.jsx)("div",{children:(0,g.jsx)("div",{style:{marginLeft:"auto",marginRight:"auto"},children:(0,g.jsxs)(u.Z.Compact,{style:{paddingTop:"25px",paddingLeft:"10%",minWidth:"100%"},children:[(0,g.jsx)(l.ZP,{type:"primary",disabled:"ready"!==o,onClick:function(){a&&(h((0,d.bG)(a)),r(""))},children:"Send"}),(0,g.jsx)(m.Z,{placeholder:"Write a message",bordered:!1,maxLength:100,showCount:!0,onChange:function(e){return r(e.currentTarget.value)},value:a,style:{maxWidth:"70%"}})]})})})},C=v},2988:function(e,s,a){e.exports=a.p+"static/media/background.9ec2fe5a339522a38e32.png"}}]);
//# sourceMappingURL=58.38baf2bf.chunk.js.map